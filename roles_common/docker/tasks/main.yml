---

- name: install deb packages
  apt:
    pkg: "{{ item }}"
    update_cache: yes
    state: present
  with_items:
    - docker-ce
    - python 
    - python-pip

- name: uninstall pip packages
  pip: 
    name: docker-py
    state: absent
    
- name: install pip packages
  pip: 
    name: "{{ item }}"
    state: present
  with_items:
    - setuptools
    - docker
    - docker-compose

- name: daemon config f√ºr docker erstellen 
  template: src=daemon.conf dest=/etc/docker/daemon.conf
  notify: restart docker
  
- name: create telegraf config  
  template: src=telegraf.conf dest=/etc/telegraf/telegraf.d/docker.conf
  notify: restart telegraf
